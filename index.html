<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BioScan Dashboard</title>
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background: linear-gradient(135deg, #f0f9ff, #e0f7fa, #f9fbe7);
      min-height: 100vh;
    }
    .card {
      border: none;
      border-radius: 20px;
      position: relative;
      overflow: hidden;
    }
    .card-body {
      position: relative;
      z-index: 2;
    }
    .card::before {
      content: "";
      position: absolute;
      top: -20px;
      right: -20px;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      opacity: 0.2;
      z-index: 1;
    }
    .temp-card::before { background: #ff5252; }
    .spo2-card::before { background: #2979ff; }
    .bp-card::before { background: #43a047; }
    .icon {
      font-size: 2rem;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="container py-5">
    <h1 class="text-center mb-5 fw-bold">🌡️ BioScan Dashboard</h1>
    
    <div class="row mb-5">
      <!-- Temperature Card -->
      <div class="col-md-4">
        <div class="card text-center shadow temp-card">
          <div class="card-body">
            <i class="bi bi-thermometer-half text-danger icon"></i>
            <h5 class="card-title">Temperature</h5>
            <p class="display-6 fw-bold" id="temp">--</p>
            <p>°C</p>
          </div>
        </div>
      </div>
      <!-- SpO2 Card -->
      <div class="col-md-4">
        <div class="card text-center shadow spo2-card">
          <div class="card-body">
            <i class="bi bi-heart-pulse text-primary icon"></i>
            <h5 class="card-title">Oxygen</h5>
            <p class="display-6 fw-bold" id="spo2">--</p>
            <p>%</p>
          </div>
        </div>
      </div>
      <!-- BP Card -->
      <div class="col-md-4">
        <div class="card text-center shadow bp-card">
          <div class="card-body">
            <i class="bi bi-heart-fill text-success icon"></i>
            <h5 class="card-title">Blood Pressure</h5>
            <p class="display-6 fw-bold" id="bp">--</p>
            <p>mmHg</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts -->
    <div class="row">
      <div class="col-md-6 mb-4">
        <div class="card shadow">
          <div class="card-body">
            <canvas id="tempChart"></canvas>
          </div>
        </div>
      </div>
      <div class="col-md-6 mb-4">
        <div class="card shadow">
          <div class="card-body">
            <canvas id="spo2Chart"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // عناصر الكروت
    const tempEl = document.getElementById("temp");
    const spo2El = document.getElementById("spo2");
    const bpEl = document.getElementById("bp");

    // إعداد الرسوم البيانية
    const tempChart = new Chart(document.getElementById("tempChart"), {
      type: "line",
      data: { 
        labels: [], 
        datasets: [{ label: "Temperature (°C)", data: [], borderColor: "#ff5252", backgroundColor:"#ff525280", fill: true, tension: 0.3 }] 
      }
    });

    const spo2Chart = new Chart(document.getElementById("spo2Chart"), {
      type: "line",
      data: { 
        labels: [], 
        datasets: [{ label: "Oxygen (%)", data: [], borderColor: "#2979ff", backgroundColor:"#2979ff80", fill: true, tension: 0.3 }] 
      }
    });

    // تحديث البيانات
    function updateChart(chart, value) {
      const now = new Date().toLocaleTimeString();
      chart.data.labels.push(now);
      chart.data.datasets[0].data.push(value);
      if (chart.data.labels.length > 10) {
        chart.data.labels.shift();
        chart.data.datasets[0].data.shift();
      }
      chart.update();
    }

    // مولد قيم عشوائية للتجريب
    function generateFakeData() {
      const temp = (36 + Math.random() * 2).toFixed(1); // 36 - 38 °C
      const spo2 = (95 + Math.random() * 5).toFixed(0); // 95 - 100 %
      const bp = `${(100 + Math.random() * 20).toFixed(0)}/${(70 + Math.random() * 15).toFixed(0)}`; // 100-120 / 70-85

      // تحديث الكروت
      tempEl.innerText = temp;
      spo2El.innerText = spo2;
      bpEl.innerText = bp;

      // تحديث الرسوم البيانية
      updateChart(tempChart, temp);
      updateChart(spo2Chart, spo2);
    }

    // يحدث كل 3 ثواني
    setInterval(generateFakeData, 3000);
  </script>
</body>
</html>
